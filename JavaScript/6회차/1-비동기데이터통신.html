<!-- 
    HTTP(HyperText Transfer Protocol)는 웹 브라우저와 웹 서버가 데이터를 주고받을 수 있게 디자인된 통신 규약
    HTTP는 모든 데이터 교환의 기초, 이 규약을 암호화하여 보안을 확보한 규약은 HTTPS라 한다.
    HTTP에서는 클라이언트와 서버에 요청 메시지를 보내고, 이에 대해 서버가 응답 메시지를 반환한다.
    서버는 응답 메시지를 반환한 후에 초기 상태로 돌아간다.
    이러한 특징으로 인해 HTTP를 stateless 규약이라고도 한다.

    HTTP 요청과 응답
    1. 요청
    HTTP 요청 메시지는 요청 행, 요청 헤더, 메시지 본문으로 구성된다.
    요청 행 : 요청 메소드, URL, HTTP 버전 정보 등을 포함한다.
    요청 헤더 : 메시지 정보, 메시지에 저장한 데이터 정보 등을 포함한다.
    메시지 본문 : 서버 측으로 보내는 데이터를 포함한다.
    => 요청 메소드란? GET, POST 등 데이터 송수신 방식을 지정한 것
    2. 응답
    응답 행, 응답 헤더, 메시지 본문으로 구성된다.
    응답 행 : 상태 코드, 보충 메시지, HTTP 버전 정보 등을 포함한다.
    응답 헤더 : 메시지 정보, 메시지에 저장한 데이터 정보 등을 포함한다.
    메시지 본문 : 클라이언트 측으로 보내는 데이터를 포함한다.
    => 상태코드란? 요청이 성공적으로 완료되었는지를 보여주는 숫자 코드
    ex) 200: 성공, 4xx: 요청보낸 사람의 문제, 5xx: 요청받는 사람의 문제

    XMLHttpRequest
    XMLHttpRequest는 서버와 상호작용하기 위해 사용하는 자바스크립트 빌트인 생성자
    이를 이용하면 서버로부터 데이터를 받아와 전체 페이지의 새로고침 없이 페이지의 일부만 업데이트하는 비동기 방식의 데이터 통신 수행 가능
    이러한 프로그래밍 기법을 Ajax(Asynchronous JavaScript And XML)이라 한다.
    Ajax는 웹 서버와 비동기로 통신하고 DOM을 이용하여 웹 페이지를 동적으로 갱신하는 프로그래밍 기법

    Ajax 기법에 기초한 XMLHttpRequest 비동기 통신의 3단계
    1. XMLHttpRequest 객체를 생성
    2. 서버와 통신할 때 필요한 정보 및 처리 방법 등을 기입
    3. 요청을 전송해 통신을 시작
    => 객체 생서은 new 연산

    이벤트 핸들링
    비동기 통신을 할 때는 서버와의 통신 상태를 감시할 수 있다.
    이때 발생하는 이벤트에 대한 이벤트 핸들러를 등록할 수 있다.
    XMLHttpRequest 객체의 주요 이벤트
    abort : 요청취소
    error : 요청실패
    load : 요청을 성공하여 응답을 가져올 수 있을 때
    progress : 데이터 주고 받는 중
    timeout : 요청 시간 초과

    서버에 요청을 보낼때는 XMLHttpRequest 객체의 open 메소드로 요청을 초기화 하고,
    이후 send 메소드로 보내주는 순서로 작업을 수행
    const request = new XMLHttpRequest()
    request.open("HTTP메소드","서버URL")
    request.send()
 -->

<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Dohyun Kim">
        <meta name="description" content="Practice Page">
        <meta name="keywords" content="Study, HTML, Practice">
        <title>데이터 통신</title>
    </head>
    <body>
        <button id="push">PUSH</button>
        <hr />
        <img src="" alr="Dog Photo">
        <script>
            const rqs = new XMLHttpRequest()
            const button = document.getElementById("push")
            
            button.addEventListener("click",function(){
                rqs.open("get","https://dog.ceo/api/breeds/image/random")
                rqs.addEventListener("load", function(){
                    const result = JSON.parse(rqs.response)
                    const img = document.querySelector("img")
                    img.src = result.message
                })
                rqs.send()
            })

            // https://dog.ceo/api/breeds/image/random


            

        </script>
    </body>
</html>